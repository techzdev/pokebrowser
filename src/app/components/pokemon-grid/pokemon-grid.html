<div class="pokemon-grid-container">
  <header class="grid-header">
    <h1>Pok√©mon Browser</h1>
    <p>Discover and explore the world of Pok√©mon</p>
    
    <!-- Search Bar -->
    <app-search-bar></app-search-bar>
    
    <div class="status-banner" *ngIf="error">
      <div class="banner-content">
        <span class="banner-icon">‚ö†Ô∏è</span>
        <span class="banner-text">{{ error }}</span>
      </div>
    </div>
  </header>

  <!-- Virtual Scrolling Container -->
  <cdk-virtual-scroll-viewport 
    class="pokemon-viewport" 
    *ngIf="filteredPokemon.length > 0"
    [itemSize]="280" 
    [minBufferPx]="560" 
    [maxBufferPx]="1120">
    
    <div class="pokemon-grid">
      <app-pokemon-card 
        *cdkVirtualFor="let poke of filteredPokemon; trackBy: trackByPokemon; let i = index"
        [pokemon]="poke"
        [index]="getDisplayIndex(i)"
        [class.instant-show]="isRecentlyLoaded(i)">
      </app-pokemon-card>
    </div>
  </cdk-virtual-scroll-viewport>

  <!-- Skeleton Loading Cards ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° -->
  <div class="skeleton-container" *ngIf="showSkeletons">
    <div class="skeleton-card" 
         *ngFor="let item of [1,2,3,4]; let i = index"
         [style.animation-delay.ms]="i * 150">
      <div class="skeleton-image"></div>
      <div class="skeleton-content">
        <div class="skeleton-title"></div>
        <div class="skeleton-text"></div>
        <div class="skeleton-text short"></div>
      </div>
    </div>
  </div>

  <div class="loading-spinner" *ngIf="loading && pokemon.length === 0">
    <div class="spinner">
      <div class="pokeball">
        <div class="pokeball-button"></div>
      </div>
    </div>
    <p>Loading Pok√©mon...</p>
  </div>

  <!-- Loading indicator ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° -->
  <div class="load-more-indicator" *ngIf="isLoadingMore && pokemon.length > 0">
    <div class="mini-spinner"></div>
    <p>Loading more Pok√©mon...</p>
  </div>

  <!-- Invisible trigger element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Intersection Observer -->
  <div #loadTrigger 
       class="load-trigger" 
       *ngIf="pokemon.length > 0 && hasMorePokemon && !isLoadingMore">
  </div>

  <div class="empty-state" *ngIf="!loading && filteredPokemon.length === 0 && pokemon.length > 0">
    <div class="empty-icon">üîç</div>
    <h3>No Pok√©mon found</h3>
    <p>Try adjusting your search criteria.</p>
  </div>
  
  <div class="empty-state" *ngIf="!loading && pokemon.length === 0">
    <div class="empty-icon">üîç</div>
    <h3>No Pok√©mon found</h3>
    <p>Unable to load Pok√©mon data. Please check your connection and try again.</p>
  </div>
</div>
